"use strict";function _instanceof(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](e)}else{return e instanceof t}}function _classCallCheck(e,t){if(!_instanceof(e,t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){if(t)_defineProperties(e.prototype,t);if(i)_defineProperties(e,i);return e}var Itemize=function(){function i(e){_classCallCheck(this,i);this.items=[];this.globalOptions=this.mergeOptions(e);var t=this.optionsTypeCheck(this.globalOptions);if(t!=="valid"){console.error("- Itemize - TYPE ERROR:\n"+t)}else{this.targetElements=this.getTargetElements();if(this.targetElements&&this.targetElements.length>0){this.itemizeIt()}else{console.error("- Itemize - ERROR:\n Cannot find any DOM elements with the attribute 'itemize' \n")}}this.elPos={}}_createClass(i,[{key:"getTargetElements",value:function e(){try{return document.querySelectorAll("[itemize]")}catch(e){console.error(e);return null}}},{key:"getOptionsFromAttributes",value:function t(e,t){if(e.getAttribute("eraseBtn")==="false"){t.eraseBtn=false}else if(e.getAttribute("eraseBtn")==="true"){t.eraseBtn=true}if(e.getAttribute("modalConfirm")==="false"){t.modalConfirm=false}else if(e.getAttribute("modalConfirm")==="true"){t.modalConfirm=true}if(e.getAttribute("flipAnimation")==="false"){t.flipAnimation=false}else if(e.getAttribute("flipAnimation")==="true"){t.flipAnimation=true}if(typeof e.getAttribute("eraseBtnWidth")==="string"&&parseInt(e.getAttribute("eraseBtnWidth"))>0){t.eraseBtnWidth=parseInt(e.getAttribute("eraseBtnWidth"))}if(typeof e.getAttribute("flipAnimDuration")==="string"&&parseInt(e.getAttribute("flipAnimDuration"))>0){t.flipAnimDuration=parseInt(e.getAttribute("flipAnimDuration"))}return t}},{key:"itemizeIt",value:function n(){var c=this;var f="";try{var e=function e(e){var o=c.targetElements[e];var t=c.makeId(8);o.itemizeId=t;o.classList.add("itemize_parent_".concat(t));for(var i=o.classList.length-1;i>=0;i--){if(o.classList[i].indexOf("itemize_parent")!==-1){o.classList.remove(o.classList[i])}}o.classList.add("itemize_parent_".concat(t));var n=Object.assign({},c.globalOptions);n=c.getOptionsFromAttributes(o,n);o.options=n;var r=document.querySelector(c.target+" .itemize_style");if(r){o.querySelector(".itemize_style").remove()}var a=document.createElement("style");a.classList.add("itemize_style");a.type="text/css";var s="";if(o.options.eraseBtn&&!o.options.eraseBtnClass){s+=".itemize_parent_".concat(o.itemizeId," .itemize_btn_close{position:absolute;top:0!important;right:0!important;width:").concat(o.options.eraseBtnWidth,"px!important;height:").concat(o.options.eraseBtnWidth,"px!important;overflow:hidden;cursor:pointer;margin-top:5px;margin-right:5px}.itemize_parent_").concat(o.itemizeId," .itemize_btn_close:hover::after,.itemize_parent_").concat(o.itemizeId," .itemize_btn_close:hover::before{background:").concat(o.options.eraseBtnHoverColor,"}.itemize_parent_").concat(o.itemizeId," .itemize_btn_close::after,.itemize_parent_").concat(o.itemizeId," .itemize_btn_close::before{content:'';position:absolute;height:").concat(o.options.eraseBtnThickness,"px;width:").concat(o.options.eraseBtnWidth,"px;top:50%;left:0;margin-top:").concat(o.options.eraseBtnThickness*.5<1?-1:-o.options.eraseBtnThickness*.5,"px;background:").concat(o.options.eraseBtnColor,";border-radius:100%}.itemize_parent_").concat(o.itemizeId," .itemize_btn_close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.itemize_parent_").concat(o.itemizeId," .itemize_btn_close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}")}if(a.styleSheet){a.styleSheet.cssText=s}else{a.appendChild(document.createTextNode(s))}o.appendChild(a);var l=function l(e){var t=o.children[e];if(t.type!=="text/css"){if(!t.itemizeId){t.itemizeId=c.makeId(8)}c.items.push(t);t.classList.add("itemize_item_"+t.itemizeId);if(!o.options.eraseBtn){t.onclick=function(){if(o.options.modalConfirm){c.modalConfirm(t.itemizeId)}else{c.erase(t.itemizeId)}}}else{if(!o.options.eraseBtnClass){t.style.position="relative";var i=document.createElement("div");i.classList.add("itemize_btn_"+t.itemizeId);i.classList.add("itemize_btn_close");i.onclick=function(){if(o.options.modalConfirm){console.log(t.itemizeId);c.modalConfirm(t.itemizeId)}else{c.erase(t.itemizeId)}};t.appendChild(i)}else{var n=document.querySelector(".itemize_item_"+t.itemizeId+" ."+o.options.eraseBtnClass);if(!n){f+="Cannot find specified class: "+o.options.eraseBtnClass+"\n"}n.onclick=function(){if(o.options.modalConfirm){c.modalConfirm(t.itemizeId)}else{c.erase(t.itemizeId)}}}}}};for(var m=0;m<o.children.length;m++){l(m)}};for(var t=0;t<this.targetElements.length;t++){e(t)}}catch(i){console.error("- Itemize - ERROR:\n"+f);console.error(i)}}},{key:"modalConfirm",value:function o(e){var t=this;try{var i=null;if(typeof e==="string"){for(var n=0;n<this.items.length;n++){if(this.items[n].itemizeId===e){i=this.items[n]}}if(!i){i=document.querySelector(e);if(!i||!i.itemizeId){throw new Error("Not a valid Itemize element1, cannot create a confirm modal.")}}if(!i){throw new Error("No item found2, cannot create a confirm modal.")}}else{i=elem;if(!i){throw new Error("No item found3, cannot create a confirm modal.")}if(!i.itemizeId){throw new Error("Not a valid Itemize element4, cannot create a confirm modal.")}}var o=document.createElement("div");var r=document.createElement("div");var a=document.createElement("div");var s=document.createElement("button");var l=document.createElement("button");var m=document.querySelector("body");o.classList.add("itemize_modal_backdrop");r.classList.add("itemize_modal");a.textContent="Are you sure?";s.innerHTML="Yes";l.innerHTML="Cancel";r.appendChild(a);r.appendChild(s);r.appendChild(l);o.onclick=function(){m.removeChild(o);m.removeChild(r)};l.onclick=function(){m.removeChild(o);m.removeChild(r)};s.onclick=function(){t.erase(e);m.removeChild(o);m.removeChild(r)};Object.assign(r.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",width:"35vw",height:"35vh",background:"rgb(250, 220,250)",zIndex:1e6});Object.assign(o.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0,0.5)",zIndex:1e5});m.prepend(r);m.prepend(o);o.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-in-out",fill:"both"});r.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-in-out",fill:"both"})}catch(c){console.error("- Itemize - ERROR:\n"+c)}}},{key:"erase",value:function r(e){try{var t=null;if(typeof e==="string"){for(var i=0;i<this.items.length;i++){if(this.items[i].itemizeId===e){t=this.items[i];t.arrayPosition=i}}if(!t){t=document.querySelector(e);if(!t||!t.itemizeId){throw new Error("Not a valid Itemize element")}for(var n=0;n<this.items.length;n++){if(this.items[n].itemizeId===t.itemizeId){t.arrayPosition=n}}}if(!t){throw new Error("No item found to erase")}}else{t=e;if(!t){throw new Error("No item found to erase")}if(!t.itemizeId){throw new Error("Not a valid Itemize element")}for(var o=0;o<this.items.length;o++){if(t.itemizeId===this.items[o].itemizeId){t.arrayPosition=o}}}if(t.arrayPosition||t.arrayPosition===0){if(t.parentNode.options.flipAnimation){this.flipRead(this.items);this.flipRemove(t);this.items.splice(t.arrayPosition,1);this.flipPlay(this.items)}else{if(this.globalOptions.onErase){this.globalOptions.onErase(t)}t.parentNode.removeChild(t);this.items.splice(t.arrayPosition,1)}}else{throw new Error("this element has an invalid itemizeId")}}catch(r){console.error("- Itemize - ERROR:\n"+r)}}},{key:"flipRemove",value:function a(e){var t=this;e.parentNode.appendChild(e);var i=e.getBoundingClientRect();var n=this.elPos[e.itemizeId];var o=n.x-i.x;var r=n.y-i.y;console.log(e.parentNode.options.flipAnimDuration);e.animate([{transform:"translate(".concat(o,"px, ").concat(r,"px)"),opacity:1},{transform:"translate(".concat(o+50,"px, ").concat(r,"px)"),opacity:0}],{duration:e.parentNode.options.flipAnimDuration,easing:"ease-in-out",fill:"both"});setTimeout(function(){if(t.globalOptions.onErase){t.globalOptions.onErase(e)}e.parentNode.removeChild(e)},e.parentNode.options.flipAnimDuration)}},{key:"flipRead",value:function s(e){this.elPos={};for(var t=0;t<e.length;t++){this.elPos[e[t].itemizeId]=e[t].getBoundingClientRect()}}},{key:"flipPlay",value:function l(e){for(var t=0;t<e.length;t++){var i=e[t].getBoundingClientRect();var n=this.elPos[e[t].itemizeId];var o=n.x-i.x;var r=n.y-i.y;var a=n.width/i.width;var s=n.height/i.height;e[t].animate([{transform:"translate(".concat(o,"px, ").concat(r,"px) scale(").concat(a,", ").concat(s,")")},{transform:"none"}],{duration:e[t].parentNode.options.flipAnimDuration,easing:"ease-in-out",fill:"both"})}}},{key:"mergeOptions",value:function m(e){try{var t={eraseBtn:true,eraseBtnWidth:20,eraseBtnThickness:2,eraseBtnColor:"#525252",eraseBtnHoverColor:"#000000",eraseBtnClass:null,modalConfirm:false,flipAnimation:true,flipAnimDuration:500,onErase:null};for(var i in e){if(e.hasOwnProperty(i))t[i]=e[i]}return t}catch(n){console.error(n)}}},{key:"optionsTypeCheck",value:function c(e){var t="";if(typeof e.eraseBtn!=="boolean"){t+="option 'button' must be a Boolean\n"}if(typeof e.modalConfirm!=="boolean"){t+="option 'modalConfirm' must be a Boolean\n"}if(typeof e.eraseBtnWidth!=="number"){t+="option 'eraseBtnWidth' must be a Number\n"}if(typeof e.eraseBtnThickness!=="number"){t+="option 'eraseBtnThickness' must be a Number\n"}if(e.eraseBtnClass&&typeof e.eraseBtnClass!=="string"){t+="option 'buttonClass' must be a String\n"}if(typeof e.flipAnimation!=="boolean"){t+="option 'flipAnimation' must be a Boolean\n"}if(typeof e.flipAnimDuration!=="number"){t+="option 'flipAnimDuration' must be a Number\n"}if(e.onErase&&typeof e.onErase!=="function"){t+="option 'onErase' must be a Function\n"}if(t===""){return"valid"}else{return t}}},{key:"makeId",value:function f(e){var t="";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var n=i.length;for(var o=0;o<e;o++){t+=i.charAt(Math.floor(Math.random()*n))}return t}}]);return i}();