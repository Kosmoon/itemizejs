"use strict";function _defineProperty(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){if(t)_defineProperties(e.prototype,t);if(i)_defineProperties(e,i);return e}var Itemize=function(){function r(e,t){_classCallCheck(this,r);this.items=[];this.globalOptions=this.mergeOptions(e);this.alertNb=0;this.target=t;this.modalDisappearTimeout=null;var i=this.optionsTypeCheck(this.globalOptions);if(i!=="valid"){console.error("- Itemize - TYPE ERROR:\n"+i)}else{this.targetElements=this.getTargetElements(this.target);if(this.targetElements&&this.targetElements.length>0){this.clearObservers();this.itemizeIt()}else{console.error("- Itemize - ERROR:\n Cannot find any valid target\n")}}this.elPos={}}_createClass(r,[{key:"getTargetElements",value:function e(e){try{if(!e){return document.querySelectorAll("[itemize]")}else{return document.querySelectorAll(e)}}catch(t){console.error(t);return null}}},{key:"getOptionsFromAttributes",value:function t(e,t){if(e.getAttribute("removeBtn")==="false"){t.removeBtn=false}else if(e.getAttribute("removeBtn")==="true"){t.removeBtn=true}if(e.getAttribute("modalConfirm")==="false"){t.modalConfirm=false}else if(e.getAttribute("modalConfirm")==="true"){t.modalConfirm=true}if(e.getAttribute("flipAnimation")==="false"){t.flipAnimation=false}else if(e.getAttribute("flipAnimation")==="true"){t.flipAnimation=true}if(typeof e.getAttribute("removeBtnClass")==="string"){if(e.getAttribute("removeBtnClass")==="false"){t.removeBtnClass=null}else{t.removeBtnClass=e.getAttribute("removeBtnClass")}}if(typeof e.getAttribute("removeBtnWidth")==="string"&&parseInt(e.getAttribute("removeBtnWidth"))>0){t.removeBtnWidth=parseInt(e.getAttribute("removeBtnWidth"))}if(typeof e.getAttribute("removeBtnColor")==="string"){t.removeBtnColor=e.getAttribute("removeBtnColor")}if(typeof e.getAttribute("removeBtnHoverColor")==="string"){t.removeBtnHoverColor=e.getAttribute("removeBtnHoverColor")}if(typeof e.getAttribute("removeBtnSharpness")==="string"){t.removeBtnSharpness=e.getAttribute("removeBtnSharpness")}if(typeof e.getAttribute("removeBtnPosition")==="string"){t.removeBtnPosition=e.getAttribute("removeBtnPosition")}if(typeof e.getAttribute("removeBtnBgColor")==="string"){t.removeBtnBgColor=e.getAttribute("removeBtnBgColor")}if(typeof e.getAttribute("removeBtnBgHoverColor")==="string"){t.removeBtnBgHoverColor=e.getAttribute("removeBtnBgHoverColor")}if(typeof e.getAttribute("removeBtnMargin")==="string"&&parseInt(e.getAttribute("removeBtnMargin"))!==NaN){t.removeBtnMargin=parseInt(e.getAttribute("removeBtnMargin"))}if(typeof e.getAttribute("modalText")==="string"){t.modalText=e.getAttribute("modalText")}if(typeof e.getAttribute("removeAlertText")==="string"){t.removeAlertText=e.getAttribute("removeAlertText")}if(typeof e.getAttribute("addAlertText")==="string"){t.addAlertText=e.getAttribute("addAlertText")}if(e.getAttribute("showAddAlerts")==="true"){t.showAddAlerts=true}else if(e.getAttribute("showAddAlerts")==="false"){t.showAddAlerts=false}if(e.getAttribute("showRemoveAlerts")==="true"){t.showRemoveAlerts=true}else if(e.getAttribute("showRemoveAlerts")==="false"){t.showRemoveAlerts=false}if(e.getAttribute("removeBtnCircle")==="true"){t.removeBtnCircle=true}else if(e.getAttribute("removeBtnCircle")==="false"){t.removeBtnCircle=false}if(typeof e.getAttribute("alertPosition")==="string"){t.alertPosition=e.getAttribute("alertPosition")}if(typeof e.getAttribute("flipAnimDuration")==="string"&&parseInt(e.getAttribute("flipAnimDuration"))>0){t.flipAnimDuration=parseInt(e.getAttribute("flipAnimDuration"))}if(typeof e.getAttribute("animRemoveTranslateX")==="string"&&parseInt(e.getAttribute("animRemoveTranslateX"))!==NaN){t.animRemoveTranslateX=parseInt(e.getAttribute("animRemoveTranslateX"))}if(typeof e.getAttribute("animRemoveTranslateY")==="string"&&parseInt(e.getAttribute("animRemoveTranslateY"))!==NaN){t.animRemoveTranslateY=parseInt(e.getAttribute("animRemoveTranslateY"))}if(typeof e.getAttribute("animAddTranslateY")==="string"&&parseInt(e.getAttribute("animAddTranslateY"))!==NaN){t.animAddTranslateY=parseInt(e.getAttribute("animAddTranslateY"))}if(typeof e.getAttribute("animAddTranslateX")==="string"&&parseInt(e.getAttribute("animAddTranslateX"))!==NaN){t.animAddTranslateX=parseInt(e.getAttribute("animAddTranslateX"))}if(typeof e.getAttribute("removeBtnThickness")==="string"&&parseInt(e.getAttribute("removeBtnThickness"))>0){t.removeBtnThickness=parseInt(e.getAttribute("removeBtnThickness"))}return t}},{key:"clearObservers",value:function i(){if(window.itemizeObservers){for(var e=window.itemizeObservers.length-1;e>=0;e--){window.itemizeObservers[e].disconnect();window.itemizeObservers.splice(e,1)}}}},{key:"itemizeIt",value:function o(e){var i=this;var t="";try{for(var r=0;r<this.targetElements.length;r++){var o=this.targetElements[r];var n=this.makeId(8);o.itemizeId=n;for(var a=o.classList.length-1;a>=0;a--){if(o.classList[a].indexOf("itemize_parent")!==-1){o.classList.remove(o.classList[a])}}o.classList.add("itemize_parent_".concat(n));var s=Object.assign({},this.globalOptions);s=this.getOptionsFromAttributes(o,s);o.itemizeOptions=s;if(!e){(function(){var e={attributes:true,childList:true,subtree:true};var l=i;var t=function t(e,t){var i=true;var r=false;var o=undefined;try{for(var n=e[Symbol.iterator](),a;!(i=(a=n.next()).done);i=true){var s=a.value;if(s.type=="childList"){s.addedNodes.forEach(function(e){var t=true;e.classList.forEach(function(e){if(e.indexOf("itemize_")!==-1){t=false}});if(t){if(e.getAttribute("notItemize")){console.log("not itemize element added")}else{if(e.parentElement.itemizeOptions.flipAnimation){e.classList.add("itemize_hide");l.itemizeChild(e,e.parentElement,true);l.flipRead(l.items);l.flipAdd(e);l.flipPlay(l.items)}else{l.itemizeChild(e,e.parentElement,true)}}}})}}}catch(m){r=true;o=m}finally{try{if(!i&&n["return"]!=null){n["return"]()}}finally{if(r){throw o}}}};if(window.itemizeObservers){window.itemizeObservers.push(new MutationObserver(t))}else{window.itemizeObservers=[new MutationObserver(t)]}window.itemizeObservers[window.itemizeObservers.length-1].observe(o,e);window.itemizeObservers[window.itemizeObservers.length-1].itemizeId=o.itemizeId})()}this.applyCss(o);for(var m=0;m<o.children.length;m++){var l=o.children[m];this.itemizeChild(l,o)}}}catch(c){console.error("- Itemize - ERROR:\n"+t);console.error(c)}}},{key:"itemizeChild",value:function n(e,t,i){var r=this;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(e.type!=="text/css"&&typeof e.getAttribute("notItemize")!=="string"&&!e.itemizeId){e.itemizeId=this.makeId(8);this.items.push(e);e.classList.add("itemize_item_"+e.itemizeId);if(!t.itemizeOptions.removeBtn){e.onclick=function(){if(t.itemizeOptions.modalConfirm){r.modalConfirm(e.itemizeId)}else{r.remove(e.itemizeId)}}}else{if(!t.itemizeOptions.removeBtnClass){e.style.position="relative";var o=document.createElement("div");o.classList.add("itemize_btn_"+e.itemizeId);o.classList.add("itemize_remove_btn");o.onclick=function(){if(t.itemizeOptions.modalConfirm){r.modalConfirm(e.itemizeId)}else{r.remove(e.itemizeId)}};e.appendChild(o)}else{var n=document.querySelector(".itemize_item_"+e.itemizeId+" ."+t.itemizeOptions.removeBtnClass);if(!n){knownErrors+="Cannot find specified button's class: "+t.itemizeOptions.removeBtnClass+"\n"}n.onclick=function(){if(t.itemizeOptions.modalConfirm){r.modalConfirm(e.itemizeId)}else{r.remove(e.itemizeId)}}}}if(i){this.showAlert("added",e)}}}},{key:"applyCss",value:function a(e){var t=e.itemizeOptions;var i=e.querySelector(".itemize_style");if(i){e.querySelector(".itemize_style").remove()}var r=document.createElement("style");r.classList.add("itemize_style");r.type="text/css";var o="";if(t.removeBtn&&!t.removeBtnClass){var n=t.removeBtnMargin+"px";var a={top:0,right:0,bottom:"auto",left:"auto",marginTop:n,marginRight:n,marginBottom:"0px",marginLeft:"0px",transform:"none"};switch(t.removeBtnPosition){case"center-right":a.top="50%";a.marginTop="0px";a.transform="translateY(-50%)";break;case"bottom-right":a.top="auto";a.bottom=0;a.marginTop="0px";a.marginBottom=n;break;case"bottom-center":a.top="auto";a.right="auto";a.bottom=0;a.left="50%";a.marginTop="0px";a.marginRight="0px";a.marginBottom=n;a.transform="translateX(-50%)";break;case"bottom-left":a.top="auto";a.right="auto";a.bottom=0;a.left=0;a.marginTop="0px";a.marginRight="0px";a.marginBottom=n;a.marginLeft=n;case"center-left":a.top="50%";a.right="auto";a.left=0;a.marginTop="0px";a.marginRight="0px";a.marginLeft=n;a.transform="translateY(-50%)";break;case"top-left":a.right="auto";a.left=0;a.marginRight="0px";a.marginLeft=n;break;case"top-center":a.right="auto";a.left="50%";a.marginRight="0px";a.marginTop=n;a.transform="translateX(-50%)";break;default:break}o+=".itemize_parent_".concat(e.itemizeId," .itemize_remove_btn{position:absolute;top:").concat(a.top,"!important;right:").concat(a.right,"!important;bottom:").concat(a.bottom,"!important;left:").concat(a.left,"!important;width:").concat(t.removeBtnWidth,"px!important;height:").concat(t.removeBtnWidth,"px!important;overflow:hidden;cursor:pointer;margin:").concat(a.marginTop," ").concat(a.marginRight," ").concat(a.marginBottom," ").concat(a.marginLeft,";transform:").concat(a.transform,";border-radius:").concat(t.removeBtnCircle?"50%":"0%",";background-color:").concat(t.removeBtnBgColor,"}.itemize_remove_btn:hover{background-color:").concat(t.removeBtnBgHoverColor,"}.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn:hover::after,.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn:hover::before{transition:background 0.2s ease-in-out;background:").concat(t.removeBtnHoverColor,"}.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn::after,.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn::before{content:'';position:absolute;height:").concat(t.removeBtnThickness,"px;transition:background 0.2s ease-in-out;width:").concat(t.removeBtnWidth/(t.removeBtnCircle?2:1),"px;top:50%;left:").concat(t.removeBtnCircle?"25%":0,";margin-top:").concat(t.removeBtnThickness*.5<1?-1:-t.removeBtnThickness*.5,"px;background:").concat(t.removeBtnColor,";border-radius:").concat(t.removeBtnSharpness,"}.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.itemize_parent_").concat(e.itemizeId," .itemize_remove_btn::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}")}else{o+=".itemize_parent_".concat(e.itemizeId," .itemize_hide{display:none}")}if(r.styleSheet){r.styleSheet.cssText=o}else{r.appendChild(document.createTextNode(o))}e.appendChild(r)}},{key:"modalConfirm",value:function s(e){var r=this;try{var t;var i=null;if(typeof e==="string"){for(var o=0;o<this.items.length;o++){if(this.items[o].itemizeId===e){i=this.items[o]}}if(!i){i=document.querySelector(e);if(!i||!i.itemizeId){throw new Error("Not a valid Itemize element1, cannot create a confirm modal.")}}if(!i){throw new Error("No item found2, cannot create a confirm modal.")}}else{i=elem;if(!i){throw new Error("No item found3, cannot create a confirm modal.")}if(!i.itemizeId){throw new Error("Not a valid Itemize element4, cannot create a confirm modal.")}}var n=document.createElement("div");var a=document.createElement("div");var s=document.createElement("div");var m=document.createElement("div");var l=document.createElement("button");var c=document.createElement("button");var d=document.createElement("div");var f=document.querySelector("body");n.classList.add("itemize_modal_backdrop");a.classList.add("itemize_modal");s.classList.add("itemize_modal_text");l.classList.add("itemize_modal_btnConfirm");c.classList.add("itemize_modal_btnCancel");d.classList.add("itemize_modal_cross");s.textContent=i.parentElement.itemizeOptions.modalText;l.innerHTML="Yes";c.innerHTML="Cancel";m.appendChild(c);m.appendChild(l);a.appendChild(s);a.appendChild(m);a.appendChild(d);var p=function p(e,t,i){t.animate([{opacity:1},{opacity:0}],{duration:300,easing:"ease-in-out",fill:"both"});i.animate([{opacity:1,transform:"translateY(-50%) translateX(-50%)"},{opacity:0,transform:"translateY(0%) translateX(-50%)"}],{duration:300,easing:"cubic-bezier(.75,-0.5,0,1.75)",fill:"both"});clearTimeout(r.modalDisappearTimeout);r.modalDisappearTimeout=setTimeout(function(){e.removeChild(t);e.removeChild(i)},300)};n.onclick=function(){if(!n.hiding){p(f,n,a)}n.hiding=true};c.onclick=function(){if(!c.clicked){p(f,n,a)}c.clicked=true};l.onclick=function(){if(!l.clicked){p(f,n,a);r.remove(e)}l.clicked=true};d.onclick=function(){if(!d.clicked){p(f,n,a)}d.clicked=true};Object.assign(a.style,(t={display:"block",position:"fixed ",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px",background:"#FFFFFF",width:"90vw",maxWidth:"500px",borderRadius:"4px",boxSizing:"border-box"},_defineProperty(t,"display","flex"),_defineProperty(t,"flexDirection","column"),_defineProperty(t,"justifyContent","center"),_defineProperty(t,"textAlign","center"),_defineProperty(t,"fontFamily","helvetica"),_defineProperty(t,"zIndex",1e6),t));var u=".itemize_modal_btnConfirm:hover{ background-color: #c83e34 !important; transition: background-color 0.3s ease-in-out }.itemize_modal_btnCancel:hover{ background-color: #4a5055 !important; transition: background-color 0.3s ease-in-out }.itemize_modal_cross {cursor:pointer;position: absolute;right: 5px;top: 5px;width: 18px;height:18px;opacity:0.3;}.itemize_modal_cross:hover{opacity:1;}.itemize_modal_cross:before,.itemize_modal_cross:after{position:absolute;left:9px;content:' ';height: 19px;width:2px;background-color:#333;}.itemize_modal_cross:before{transform:rotate(45deg);}.itemize_modal_cross:after{transform:rotate(-45deg);}";var v=document.createElement("style");if(v.styleSheet){v.styleSheet.cssText=u}else{v.appendChild(document.createTextNode(u))}a.appendChild(v);Object.assign(s.style,{marginBottom:"25px"});Object.assign(m.style,{width:"100%",display:"flex"});Object.assign(c.style,{background:"#6C757D",border:"none",padding:"10px 0 10px 0",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF",transition:"background-color 0.3s ease-in-out"});Object.assign(l.style,{background:"#F94336",border:"none",padding:"10px 0 10px 0",borderTopRightRadius:"4px",borderBottomRightRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF",transition:"background-color 0.3s ease-in-out"});Object.assign(n.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0,0.7)",zIndex:1e5});f.prepend(a);f.prepend(n);n.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-in-out",fill:"both"});a.animate([{opacity:0,transform:"translateY(-100%) translateX(-50%)"},{opacity:1,transform:"translateY(-50%) translateX(-50%)"}],{duration:400,easing:"cubic-bezier(.75,-0.5,0,1.75)",fill:"both"})}catch(g){console.error("- Itemize - ERROR:\n"+g)}}},{key:"showAlert",value:function m(e,t){var i=this;if(t.parentElement.itemizeOptions.showAddAlerts&&e==="added"||t.parentElement.itemizeOptions.showRemoveAlerts&&e==="removed"){var r="";var o="";var n="";var a="";var s="";var m="";var l="";var c="";var d="-";var f=false;var p=t.parentElement.itemizeOptions.alertTimer;if(t.parentElement.itemizeOptions.alertPosition==="bottom-center"){m="50%";l="100%";c="-50%"}else if(t.parentElement.itemizeOptions.alertPosition==="bottom-right"){m="100%";l="100%";c="-100%"}else if(t.parentElement.itemizeOptions.alertPosition==="bottom-left"){m="0%";l="100%";c="0%"}else if(t.parentElement.itemizeOptions.alertPosition==="top-center"){m="50%";l="0%";c="-50%";d="";f=true}else if(t.parentElement.itemizeOptions.alertPosition==="top-right"){m="100%";l="0%";c="-100%";d="";f=true}else if(t.parentElement.itemizeOptions.alertPosition==="top-left"){m="0%";l="0%";c="0%";d="";f=true}if(e==="removed"){r="itemize_remove_alert";o="itemize_remove_alert_text";n="#BD5B5B";a="#DEADAD";s=t.parentElement.itemizeOptions.removeAlertText}else if(e==="added"){r="itemize_add_alert";o="itemize_add_alert_text";n="#00AF66";a="#80D7B3";s=t.parentElement.itemizeOptions.addAlertText}this.alertNb++;var u=document.createElement("div");u.alertNb=this.alertNb;var v=document.createElement("div");var g=document.createElement("div");u.classList.add(r);u.classList.add("itemize_alert");g.classList.add(o);g.textContent=s;Object.assign(g.style,{boxSizing:"border-box",width:"100%",height:"100%",textAlign:"center",whiteSpace:"nowrap",padding:"10px 15px 10px 15px"});Object.assign(v.style,{background:a,width:"100%",height:"5px"});Object.assign(u.style,{boxSizing:"border-box",position:"fixed",display:"flex",flexDirection:"column",justifyContent:"center",top:l,left:m,border:"solid 1px "+a,borderRadius:"4px",transform:"translate(".concat(c,", ").concat(d).concat(this.alertNb*100-(f?100:0),"%)"),fontFamily:"helvetica",background:n,color:"#FFFFFF",zIndex:1e5});document.querySelector("body").appendChild(u);u.appendChild(v);u.appendChild(g);v.animate([{width:"100%"},{width:"0%"}],{duration:p,easing:"linear",fill:"both"});setTimeout(function(){var e=document.querySelectorAll(".itemize_alert");for(var t=0;t<e.length;t++){if(e[t].alertNb>0){e[t].animate([{transform:"translate(".concat(c,", ").concat(d).concat(e[t].alertNb*100-(f?100:0),"%)")},{transform:"translate(".concat(c,", ").concat(d).concat(e[t].alertNb*100-(f?100:0)-100,"%)")}],{duration:300,easing:"ease-in-out",fill:"both"});e[t].alertNb--}}i.alertNb--;setTimeout(function(){document.querySelector("body").removeChild(u)},300)},p)}}},{key:"remove",value:function l(e){var i=this;try{var r=null;if(typeof e==="string"){for(var t=0;t<this.items.length;t++){if(this.items[t].itemizeId===e){r=this.items[t];r.arrayPosition=t}}if(!r){r=document.querySelector(e);if(!r||!r.itemizeId){throw new Error("Not a valid Itemize element")}for(var o=0;o<this.items.length;o++){if(this.items[o].itemizeId===r.itemizeId){r.arrayPosition=o}}}if(!r){throw new Error("No item found to remove")}}else{r=e;if(!r){throw new Error("No item found to remove")}if(!r.itemizeId){throw new Error("Not a valid Itemize element")}for(var n=0;n<this.items.length;n++){if(r.itemizeId===this.items[n].itemizeId){r.arrayPosition=n}}}if(r.arrayPosition||r.arrayPosition===0){if(!r.removeStatus||r.removeStatus!=="pending"){if(this.globalOptions.beforeRemove){r.removeStatus="pending";var a=this.globalOptions.beforeRemove(r);if(a==undefined){throw new Error('The function "beforeErase" must return a Boolean or a Promise')}if(typeof a.then==="function"){a.then(function(e){if(r.parentElement.itemizeOptions.flipAnimation){var t=r.querySelector(".itemize_remove_btn");if(t){t.onclick=null}else{t=r.querySelector("."+i.globalOptions.removeBtnClass);if(t){t.onclick=null}}i.showAlert("removed",r);i.flipRead(i.items);i.flipRemove(r);i.items.splice(r.arrayPosition,1);i.flipPlay(i.items)}else{i.showAlert("removed",r);r.removeStatus=null;r.parentElement.removeChild(r);i.items.splice(r.arrayPosition,1)}})["catch"](function(e){console.log(e);r.removeStatus=null})}else if(a){if(r.parentElement.itemizeOptions.flipAnimation){var s=r.querySelector(".itemize_remove_btn");if(s){s.onclick=null}else{s=r.querySelector("."+this.globalOptions.removeBtnClass);if(s){s.onclick=null}}this.showAlert("removed",r);this.flipRead(this.items);this.flipRemove(r);this.items.splice(r.arrayPosition,1);this.flipPlay(this.items)}else{this.showAlert("removed",r);r.removeStatus=null;r.parentElement.removeChild(r);this.items.splice(r.arrayPosition,1)}}}else{if(r.parentElement.itemizeOptions.flipAnimation){var m=r.querySelector(".itemize_remove_btn");if(m){m.onclick=null}else{m=r.querySelector("."+this.globalOptions.removeBtnClass);if(m){m.onclick=null}}this.showAlert("removed",r);this.flipRead(this.items);this.flipRemove(r);this.items.splice(r.arrayPosition,1);this.flipPlay(this.items)}else{this.showAlert("removed",r);r.removeStatus=null;r.parentElement.removeChild(r);this.items.splice(r.arrayPosition,1)}}}}else{throw new Error("this element has an invalid itemizeId")}}catch(l){console.error("- Itemize - ERROR:\n"+l)}}},{key:"flipRemove",value:function c(r){r.parentElement.appendChild(r);var o=r.parentElement.itemizeOptions;var e=r.getBoundingClientRect();var t=this.elPos[r.itemizeId];var n=t.left-e.left;var a=t.top-e.top;if(r.animate){r.animate([{transform:"translate(".concat(n,"px, ").concat(a,"px)"),opacity:1},{transform:"translate(".concat(n+o.animRemoveTranslateX,"px, ").concat(a+o.animRemoveTranslateY,"px)"),opacity:0}],{duration:o.flipAnimDuration,easing:"ease-in-out",fill:"both"})}else{var s=function s(e){var t;var i=o.flipAnimDuration;if(!r.startAnimTime){r.startAnimTime=e;r.animTicks=0;r.style.transform="translateX(".concat(n,"px) translateY(").concat(a,"px)");r.style.opacity=1}t=e-r.startAnimTime;r.style.transform="translate(".concat(n+o.animRemoveTranslateX/(i*60/1e3)*r.animTicks,"px, ").concat(a+o.animRemoveTranslateY/(i*60/1e3)*r.animTicks,"px)");r.style.opacity=1-1/(i*60/1e3)*r.animTicks;if(t<i){r.animTicks++;requestAnimationFrame(s)}else{r.startAnimTime=null;r.animTicks=0}};requestAnimationFrame(s)}setTimeout(function(){r.removeStatus=null;r.parentElement.removeChild(r)},o.flipAnimDuration)}},{key:"flipAdd",value:function d(e){e.classList.remove("itemize_hide");e.inAddAnim=true;this.elPos[e.itemizeId]=e.oldAddPos||e.getBoundingClientRect();var t=e.parentElement.itemizeOptions;var i=e.getBoundingClientRect();var r=e.oldAddPos||this.elPos[e.itemizeId];var o=r.left-i.left;var n=r.top-i.top;var a=r.width/i.width;var s=r.height/i.height;if(isNaN(a)){a=1}if(isNaN(s)){s=1}e.newAddPos=i;e.oldAddPos=r;e.animate([{transform:"translate(".concat(o+t.animAddTranslateX,"px, ").concat(n+t.animAddTranslateY,"px) scale(").concat(a,", ").concat(s,")"),opacity:0},{transform:"none",opacity:1}],{duration:t.flipAnimDuration,easing:"ease-in-out",fill:"both"});setTimeout(function(){e.inAddAnim=false;e.newAddPos=null;e.oldPos=null},t.flipAnimDuration)}},{key:"flipRead",value:function f(e){for(var t=0;t<e.length;t++){this.elPos[e[t].itemizeId]=e[t].getBoundingClientRect()}}},{key:"flipPlay",value:function p(m){var l=this;var e=function e(r){if(!m[r].inAddAnim){var e=m[r].getBoundingClientRect();var t=l.elPos[m[r].itemizeId];var o=t.left-e.left;var n=t.top-e.top;var i=t.width/e.width;var a=t.height/e.height;if(isNaN(i)){i=1}if(isNaN(a)){a=1}if(o!==0||n!==0||i!==1||a!==1){m[r].inAnim=true;if(m[r].animate){m[r].animate([{transform:"translate(".concat(o,"px, ").concat(n,"px) scale(").concat(i,", ").concat(a,")")},{transform:"none"}],{duration:m[r].parentElement.itemizeOptions.flipAnimDuration,easing:"ease-in-out",fill:"both"})}else{var s=function s(e){var t;var i=m[r].parentElement.itemizeOptions.flipAnimDuration;if(!m[r].startAnimTime){m[r].startAnimTime=e;m[r].animTicks=0;m[r].style.transform="translate(".concat(o,"px, ").concat(n,"px)")}t=e-m[r].startAnimTime;m[r].style.transform="translate(".concat(o-o/(i*60/1e3)*m[r].animTicks,"px, ").concat(n-n/(i*60/1e3)*m[r].animTicks,"px) ");if(t<i){m[r].animTicks++;requestAnimationFrame(s)}else{m[r].startAnimTime=null;m[r].animTicks=0;m[r].style.transform="none"}};requestAnimationFrame(s)}setTimeout(function(){m[r].inAnim=false},m[r].parentElement.itemizeOptions.flipAnimDuration)}}};for(var t=0;t<m.length;t++){e(t)}}},{key:"mergeOptions",value:function u(e){try{var t={removeBtn:true,removeBtnWidth:18,removeBtnThickness:2,removeBtnColor:"#696969",removeBtnHoverColor:"#000000",removeBtnSharpness:"0px",removeBtnPosition:"top-right",removeBtnMargin:2,removeBtnCircle:false,removeBtnBgColor:"none",removeBtnBgHoverColor:"none",removeBtnClass:null,modalConfirm:false,modalText:"Are you sure to remove this item?",removeAlertText:"Item removed",addAlertText:"Item added",showRemoveAlerts:false,showAddAlerts:false,alertPosition:"bottom-right",alertTimer:4e3,flipAnimation:true,animRemoveTranslateX:0,animRemoveTranslateY:-100,animAddTranslateX:0,animAddTranslateY:0,flipAnimDuration:400,beforeRemove:null};for(var i in e){if(e.hasOwnProperty(i))t[i]=e[i]}return t}catch(r){console.error(r)}}},{key:"optionsTypeCheck",value:function v(e){var t="";if(typeof e.removeBtn!=="boolean"){t+="option 'button' must be a Boolean\n"}if(typeof e.modalConfirm!=="boolean"){t+="option 'modalConfirm' must be a Boolean\n"}if(typeof e.removeBtnWidth!=="number"){t+="option 'removeBtnWidth' must be a Number\n"}if(typeof e.removeBtnThickness!=="number"){t+="option 'removeBtnThickness' must be a Number\n"}if(typeof e.alertTimer!=="number"){t+="option 'alertTimer' must be a Number\n"}if(e.removeBtnClass&&typeof e.removeBtnClass!=="string"){t+="option 'buttonClass' must be a String\n"}if(typeof e.removeBtnHoverColor!=="string"){t+="option 'removeBtnHoverColor' must be a String\n"}if(typeof e.removeBtnSharpness!=="string"){t+="option 'removeBtnSharpness' must be a String\n"}if(typeof e.removeBtnPosition!=="string"){t+="option 'removeBtnPosition' must be a String\n"}if(typeof e.removeBtnBgColor!=="string"){t+="option 'removeBtnBgColor' must be a String\n"}if(typeof e.removeBtnBgHoverColor!=="string"){t+="option 'removeBtnBgHoverColor' must be a String\n"}if(typeof e.removeBtnCircle!=="boolean"){t+="option 'removeBtnCircle' must be a Boolean\n"}if(typeof e.removeBtnMargin!=="number"){t+="option 'removeBtnMargin' must be a Number\n"}if(typeof e.modalText!=="string"){t+="option 'modalText' must be a String\n"}if(typeof e.removeAlertText!=="string"){t+="option 'removeAlertText' must be a String\n"}if(typeof e.addAlertText!=="string"){t+="option 'addAlertText' must be a String\n"}if(typeof e.showRemoveAlerts!=="boolean"){t+="option 'showRemoveAlerts' must be a Boolean\n"}if(typeof e.showAddAlerts!=="boolean"){t+="option 'showAddAlerts' must be a Boolean\n"}if(typeof e.alertPosition!=="string"){t+="option 'alertPosition' must be a String\n"}if(typeof e.flipAnimation!=="boolean"){t+="option 'flipAnimation' must be a Boolean\n"}if(typeof e.flipAnimDuration!=="number"){t+="option 'flipAnimDuration' must be a Number\n"}if(typeof e.animRemoveTranslateX!=="number"){t+="option 'animRemoveTranslateX' must be a Number\n"}if(typeof e.animRemoveTranslateY!=="number"){t+="option 'animRemoveTranslateY' must be a Number\n"}if(typeof e.animAddTranslateY!=="number"){t+="option 'animAddTranslateY' must be a Number\n"}if(typeof e.animAddTranslateX!=="number"){t+="option 'animAddTranslateX' must be a Number\n"}if(e.beforeRemove&&typeof e.beforeRemove!=="function"){t+="option 'beforeRemove' must be a Function\n"}if(t===""){return"valid"}else{return t}}},{key:"makeId",value:function g(e){var t="";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var r=i.length;for(var o=0;o<e;o++){t+=i.charAt(Math.floor(Math.random()*r))}return t}}]);return r}();