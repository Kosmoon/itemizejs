"use strict";function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){if(t)_defineProperties(e.prototype,t);if(i)_defineProperties(e,i);return e}var Itemize=function(){function i(e){_classCallCheck(this,i);this.containers=[];this.items=[];this.globalOptions=this.mergeOptions(e);this.alertNb=0;this.modalDisappearTimeout=null;this.elPos={};this.lastTargetedContainers=null;var t=this.optionsTypeCheck(this.globalOptions);if(t!=="valid"){console.error("- Itemize - TYPE error:\n"+t)}}_createClass(i,[{key:"apply",value:function e(e,o){var a=this;this.globalOptions=this.mergeOptions(o);var s=0;if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){this.lastTargetedContainers=this.getTargetElements(e[t]);if(this.lastTargetedContainers&&this.lastTargetedContainers.length>0){(function(){s+=a.applyItemize(a.lastTargetedContainers,false);var r=function r(e,t){var i=1;if(e.length>0&&i<t){for(var n=0;n<e.length;n++){s+=a.applyItemize(e[n].children,false,o);i++;if(e.length>0&&i<t){r(e[n].children,t)}}}};r(a.lastTargetedContainers,a.globalOptions.nestingLevel)})()}else{console.error(" - Itemize error - \n "+e[t]+" not found.\n")}}console.log("%c"+s+" element(s) itemized","background: #060606; color:#1FEA00;padding:10px");return s+" element(s) itemized"}},{key:"cancel",value:function t(e){var t=0;if(e){if(!Array.isArray(e)){e=[e]}for(var i=0;i<e.length;i++){this.lastTargetedContainers=this.getTargetElements(e[i]);if(this.lastTargetedContainers&&this.lastTargetedContainers.length>0){t+=this.cancelItemize(this.lastTargetedContainers)}else{console.error(" - Itemize error - \n "+e[i]+" not found.\n")}}}else{this.clearObservers();t=this.cancelItemize("all")}return t+" element(s) unitemized"}},{key:"getTargetElements",value:function n(e){try{if(!e){return document.querySelectorAll("[itemize]")}else{return document.querySelectorAll(e)}}catch(t){console.error(t);return null}}},{key:"clearObservers",value:function r(e){if(window.itemizeObservers){for(var t=window.itemizeObservers.length-1;t>=0;t--){var i=false;if(e){if(window.itemizeObservers[t].itemizeContainerId===e){i=true}}else{i=true}if(i){window.itemizeObservers[t].disconnect();window.itemizeObservers.splice(t,1)}}}}},{key:"applyItemize",value:function o(e,t,i){var n=this;var r=0;var o="";try{for(var a=0;a<e.length;a++){var s=e[a];if(!s.classList.contains("itemize_remove_btn")&&s.type!=="text/css"&&s.tagName!=="BR"&&s.tagName!=="SCRIPT"&&s.tagName!=="STYLE"){var l=false;for(var m=0;m<this.containers.length;m++){if(s.itemizeContainerId&&s.itemizeContainerId===this.containers[m].itemizeContainerId){l=true}}if(!l){this.containers.push(s)}if(s.itemizeContainerId){this.clearObservers(s.itemizeContainerId)}var c=this.makeId(8);s.itemizeContainerId=c;for(var f=s.classList.length-1;f>=0;f--){if(s.classList[f].indexOf("itemize_parent")!==-1){s.classList.remove(s.classList[f]);break}}s.classList.add("itmz_parent");s.classList.add("itemize_parent_".concat(c));var d=Object.assign({},this.globalOptions);if(i){d=this.mergeOptions(i)}d=this.getOptionsFromAttributes(s,d);s.itemizeOptions=d;if(!t){(function(){var e={attributes:true,childList:true,subtree:true};var m=n;var t=function t(e,t){var i=true;var n=false;var r=undefined;try{for(var o=e[Symbol.iterator](),a;!(i=(a=o.next()).done);i=true){var s=a.value;if(s.type==="childList"&&s.addedNodes.length>0){s.addedNodes.forEach(function(e){var t=true;if(e.classList){e.classList.forEach(function(e){if(e.indexOf("itemize_")!==-1){t=false}});if(t){if(e.getAttribute("notItemize")){console.log("not itemize element added")}else if(e.parentElement&&e.type!=="text/css"&&e.tagName!=="BR"&&e.tagName!=="SCRIPT"&&e.parentElement.itemizeContainerId&&e.tagName!=="STYLE"){if(e.parentElement.itemizeOptions&&e.parentElement.itemizeOptions.flipAnimation){e.classList.add("itemize_hide");m.itemizeChild(e,e.parentElement,true);m.flipRead(m.items);m.flipAdd(e);m.flipPlay(m.items,e.parentElement.itemizeOptions.flipAnimDuration)}else{m.itemizeChild(e,e.parentElement,true)}}}}})}}}catch(l){n=true;r=l}finally{try{if(!i&&o["return"]!=null){o["return"]()}}finally{if(n){throw r}}}};if(window.itemizeObservers){window.itemizeObservers.push(new MutationObserver(t))}else{window.itemizeObservers=[new MutationObserver(t)]}window.itemizeObservers[window.itemizeObservers.length-1].observe(s,e);window.itemizeObservers[window.itemizeObservers.length-1].itemizeContainerId=s.itemizeContainerId})()}this.applyCss(s);for(var p=0;p<s.children.length;p++){var u=s.children[p];if(this.itemizeChild(u,s)){r++}}}}return r}catch(v){console.error(" - Itemize error - \n"+o);console.error(v)}}},{key:"childIsItemizable",value:function a(e,t){return e.type!=="text/css"&&typeof e.getAttribute("notItemize")!=="string"&&e.tagName!=="BR"&&e.tagName!=="SCRIPT"&&!e.itemizeItemId&&!e.itemizeBtn&&!e.classList.contains("itemize_remove_btn")&&!(t.parentNode.itemizeOptions&&e.classList.contains(t.parentNode.itemizeOptions.removeBtnClass))}},{key:"itemizeChild",value:function s(t,i,e){var n=this;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(this.childIsItemizable(t,i)){t.itemizeItemId=this.makeId(8);this.items.push(t);t.classList.add("itemize_item_"+t.itemizeItemId);t.classList.add("itmz_item");if(!i.itemizeOptions.removeBtn){t.onclick=function(e){e.stopPropagation();if(i.itemizeOptions.modalConfirm){n.modalConfirm(t.itemizeItemId)}else{n.remove(t.itemizeItemId)}};if(i.itemizeOptions.outlineItemOnHover){this.shadowOnHover(t,false)}}else{if(!i.itemizeOptions.removeBtnClass){if(t.style.position!=="absolute"&&t.style.position!=="fixed"){t.style.position="relative"}var r=document.createElement("div");r.classList.add("itemize_btn_"+t.itemizeItemId);r.classList.add("itemize_remove_btn");r.itemizeBtn=true;r.onclick=function(e){e.stopPropagation();if(i.itemizeOptions.modalConfirm){n.modalConfirm(t.itemizeItemId)}else{n.remove(t.itemizeItemId)}};t.appendChild(r);if(i.itemizeOptions.outlineItemOnHover){this.shadowOnHover(r,true)}}else{var o=document.querySelector(".itemize_item_"+t.itemizeItemId+" ."+i.itemizeOptions.removeBtnClass);if(!o){console.error(" - Itemize error - \n Cannot find specified button's class: "+i.itemizeOptions.removeBtnClass+"\n")}else{o.onclick=function(e){e.stopPropagation();if(i.itemizeOptions.modalConfirm){n.modalConfirm(t.itemizeItemId)}else{n.remove(t.itemizeItemId)}};if(i.itemizeOptions.outlineItemOnHover){this.shadowOnHover(o,true)}}}}if(e){this.showAlert("added",t)}return true}else{return false}}},{key:"shadowOnHover",value:function l(t,e){var i=null;if(e){i=t.parentElement}else{i=t}if(i){t.parentShadowStyle=i.style.boxShadow}t.onmouseenter=function(e){if(i){i.style.boxShadow="inset 0px 0px 0px 3px rgba(15,179,0,1)"}};t.onmouseleave=function(e){if(i){i.style.boxShadow=t.parentShadowStyle}}}},{key:"applyCss",value:function m(e){var t=e.itemizeOptions;var i=e.querySelector(".itemize_style");if(i){e.querySelector(".itemize_style").remove()}var n=document.createElement("style");n.classList.add("itemize_style");n.type="text/css";var r="";r+=".itemize_parent_".concat(e.itemizeContainerId," .itemize_hide{display:none}");if(t.removeBtn&&!t.removeBtnClass){var o=t.removeBtnMargin+"px";var a={top:0,right:0,bottom:"auto",left:"auto",marginTop:o,marginRight:o,marginBottom:"0px",marginLeft:"0px",transform:"none"};switch(t.removeBtnPosition){case"center-right":a.top="50%";a.marginTop="0px";a.transform="translateY(-50%)";break;case"bottom-right":a.top="auto";a.bottom=0;a.marginTop="0px";a.marginBottom=o;break;case"bottom-center":a.top="auto";a.right="auto";a.bottom=0;a.left="50%";a.marginTop="0px";a.marginRight="0px";a.marginBottom=o;a.transform="translateX(-50%)";break;case"bottom-left":a.top="auto";a.right="auto";a.bottom=0;a.left=0;a.marginTop="0px";a.marginRight="0px";a.marginBottom=o;a.marginLeft=o;break;case"center-left":a.top="50%";a.right="auto";a.left=0;a.marginTop="0px";a.marginRight="0px";a.marginLeft=o;a.transform="translateY(-50%)";break;case"top-left":a.right="auto";a.left=0;a.marginRight="0px";a.marginLeft=o;break;case"top-center":a.right="auto";a.left="50%";a.marginRight="0px";a.marginTop=o;a.transform="translateX(-50%)";break;default:break}r+=".itemize_parent_".concat(e.itemizeContainerId," .itemize_remove_btn{z-index:1000000!important;position:absolute;top:").concat(a.top,"!important;right:").concat(a.right,"!important;bottom:").concat(a.bottom,"!important;left:").concat(a.left,"!important;width:").concat(t.removeBtnWidth,"px!important;height:").concat(t.removeBtnWidth,"px!important;overflow:hidden;cursor:pointer;margin:").concat(a.marginTop," ").concat(a.marginRight," ").concat(a.marginBottom," ").concat(a.marginLeft,";transform:").concat(a.transform,";border-radius:").concat(t.removeBtnCircle?"50%":"0%",";background-color:").concat(t.removeBtnBgColor,"}.itemize_remove_btn:hover{background-color:").concat(t.removeBtnBgHoverColor,"}.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn:hover::after,.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn:hover::before{transition:background 0.2s ease-in-out;background:").concat(t.removeBtnHoverColor,"}.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn::after,.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn::before{content:'';position:absolute;height:").concat(t.removeBtnThickness,"px;transition:background 0.2s ease-in-out;width:").concat(t.removeBtnWidth/2,"px;top:50%;left:25%;margin-top:").concat(t.removeBtnThickness*.5<1?-1:-t.removeBtnThickness*.5,"px;background:").concat(t.removeBtnColor,";border-radius:").concat(t.removeBtnSharpness,"}.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.itemize_parent_").concat(e.itemizeContainerId," .itemize_remove_btn::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}")}if(n.styleSheet){n.styleSheet.cssText=r}else{n.appendChild(document.createTextNode(r))}e.appendChild(n)}},{key:"cancelItemize",value:function c(e){var t=0;try{var i=[];if(e==="all"){i=this.containers.splice(0)}else{i=e}for(var n=0;n<i.length;n++){var r=i[n];var o=r.querySelectorAll(".itmz_item");for(var a=0;a<o.length;a++){if(o[a].itemizeContainerId){this.clearObservers(o[a].itemizeContainerId)}if(o[a].itemizeItemId){this.cancelItemizeChild(o[a],o[a].parentNode);t++}}if(r.itemizeContainerId){this.clearObservers(r.itemizeContainerId);for(var s=r.classList.length-1;s>=0;s--){if(r.classList[s].indexOf("itemize_parent")!==-1){r.classList.remove(r.classList[s]);r.classList.remove("itmz_parent");break}}var l=r.querySelectorAll(".itmz_parent");for(var m=0;m<l.length;m++){this.cancelItemize(l[m])}r.itemizeContainerId=null;r.itemizeOptions=null;for(var c=0;c<this.containers.length;c++){if(this.containers[c]===r){this.containers.splice(c,1);break}}}}return t}catch(f){console.error(f)}}},{key:"cancelItemizeChild",value:function f(e,t){for(var i=this.items.length-1;i>=0;i--){if(this.items[i]===e){this.cleanItem(this.items[i]);this.items.splice(i,1);break}}if(!t.itemizeOptions.removeBtn){e.onclick=null}else{if(!t.itemizeOptions.removeBtnClass){var n=e.querySelector(".itemize_remove_btn");if(n){n.remove()}}else{var r=e.querySelector("."+t.itemizeOptions.removeBtnClass);if(r){r.onclick=null}}}var o=t.querySelector(".itemize_style");if(o){t.querySelector(".itemize_style").remove()}for(var a=e.classList.length-1;a>=0;a--){if(e.classList[a].indexOf("itemize_item_")!==-1){e.classList.remove(e.classList[a]);break}}e.itemizeItemId=null}},{key:"modalConfirm",value:function d(e){var n=this;try{var t=null;if(typeof e==="string"){for(var i=0;i<this.items.length;i++){if(this.items[i].itemizeItemId===e){t=this.items[i]}}if(!t){t=document.querySelector(e);if(!t||!t.itemizeItemId){throw new Error(" - Itemize error - \n Not a valid Itemize element, cannot create a confirm modal.")}}if(!t){throw new Error(" - Itemize error - \n No item found, cannot create a confirm modal.")}}else{t=e;if(!t){throw new Error(" - Itemize error - \n No item found, cannot create a confirm modal.")}if(!t.itemizeItemId){throw new Error(" - Itemize error - \n Not a valid Itemize element, cannot create a confirm modal.")}}var r=150;var o=document.createElement("div");var a=document.createElement("div");var s=document.createElement("div");var l=document.createElement("div");var m=document.createElement("button");var c=document.createElement("button");var f=document.createElement("div");var d=document.querySelector("body");o.classList.add("itemize_modal_backdrop");a.classList.add("itemize_modal");s.classList.add("itemize_modal_text");m.classList.add("itemize_modal_btnConfirm");c.classList.add("itemize_modal_btnCancel");f.classList.add("itemize_modal_cross");s.textContent=t.parentElement.itemizeOptions.modalText;m.innerHTML="Yes";c.innerHTML="Cancel";l.appendChild(c);l.appendChild(m);a.appendChild(s);a.appendChild(l);a.appendChild(f);var p=function p(e,t,i){t.onclick=null;i.onclick=null;if(t.animate){t.animate([{opacity:1},{opacity:0}],{duration:r,easing:"ease-in-out",fill:"both"})}else{n.animateRAF(t,[{opacity:1}],[{opacity:0}],r)}if(i.animate){i.animate([{opacity:1,transform:"translateY(-50%) translateX(-50%)"},{opacity:0,transform:"translateY(0%) translateX(-50%)"}],{duration:r,easing:"ease-in-out",fill:"both"})}else{n.animateRAF(i,[{opacity:1,transform:{translateX:-50,translateY:-50,unit:"%"}}],[{opacity:0,transform:{translateX:-50,translateY:0,unit:"%"}}],r)}clearTimeout(n.modalDisappearTimeout);n.modalDisappearTimeout=setTimeout(function(){e.removeChild(t);e.removeChild(i)},r)};o.onclick=function(){if(!o.hiding){p(d,o,a)}o.hiding=true};c.onclick=function(){if(!c.clicked){p(d,o,a)}c.clicked=true};m.onclick=function(){if(!m.clicked){p(d,o,a);n.remove(e)}m.clicked=true};f.onclick=function(){if(!f.clicked){p(d,o,a)}f.clicked=true};Object.assign(a.style,{position:"fixed ",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px",background:"#FFFFFF",width:"90vw",maxWidth:"500px",borderRadius:"4px",boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",fontFamily:"helvetica",zIndex:1e6});var u=".itemize_modal_btnConfirm:hover{ background-color: #c83e34 !important; transition: background-color 0.3s ease-in-out }.itemize_modal_btnCancel:hover{ background-color: #4a5055 !important; transition: background-color 0.3s ease-in-out }.itemize_modal_cross {cursor:pointer;position: absolute;right: 5px;top: 5px;width: 18px;height:18px;opacity:0.3;}.itemize_modal_cross:hover{opacity:1;}.itemize_modal_cross:before,.itemize_modal_cross:after{position:absolute;left:9px;content:' ';height: 19px;width:2px;background-color:#333;}.itemize_modal_cross:before{transform:rotate(45deg);}.itemize_modal_cross:after{transform:rotate(-45deg);}";var v=document.createElement("style");if(v.styleSheet){v.styleSheet.cssText=u}else{v.appendChild(document.createTextNode(u))}a.appendChild(v);Object.assign(s.style,{marginBottom:"25px"});Object.assign(l.style,{width:"100%",display:"flex"});Object.assign(c.style,{background:"#6C757D",border:"none",padding:"10px 0 10px 0",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF",transition:"background-color 0.3s ease-in-out"});Object.assign(m.style,{background:"#F94336",border:"none",padding:"10px 0 10px 0",borderTopRightRadius:"4px",borderBottomRightRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF",transition:"background-color 0.3s ease-in-out"});Object.assign(o.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0,0.7)",zIndex:1e5});d.prepend(a);d.prepend(o);if(o.animate){o.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-out",fill:"both"})}else{this.animateRAF(o,[{opacity:0}],[{opacity:1}],r)}if(a.animate){a.animate([{opacity:0,transform:"translateY(-100%) translateX(-50%)"},{opacity:1,transform:"translateY(-50%) translateX(-50%)"}],{duration:r,easing:"ease-in",fill:"both"})}else{this.animateRAF(a,[{opacity:0,transform:{translateX:-50,translateY:-100,unit:"%"}}],[{opacity:1,transform:{translateX:-50,translateY:-50,unit:"%"}}],r)}}catch(h){console.error(" - Itemize error - \n"+h)}}},{key:"showAlert",value:function p(e,t){var r=this;if(t.parentElement.itemizeOptions.showAddAlerts&&e==="added"||t.parentElement.itemizeOptions.showRemoveAlerts&&e==="removed"){var i="";var n="";var o="";var a="";var s="";var l="";var m="";var c="";var f="-";var d=false;var p=t.parentElement.itemizeOptions.alertTimer;if(t.parentElement.itemizeOptions.alertPosition==="bottom-center"){l="50%";m="100%";c="-50%"}else if(t.parentElement.itemizeOptions.alertPosition==="bottom-right"){l="100%";m="100%";c="-100%"}else if(t.parentElement.itemizeOptions.alertPosition==="bottom-left"){l="0%";m="100%";c="0%"}else if(t.parentElement.itemizeOptions.alertPosition==="top-center"){l="50%";m="0%";c="-50%";f="";d=true}else if(t.parentElement.itemizeOptions.alertPosition==="top-right"){l="100%";m="0%";c="-100%";f="";d=true}else if(t.parentElement.itemizeOptions.alertPosition==="top-left"){l="0%";m="0%";c="0%";f="";d=true}if(e==="removed"){i="itemize_remove_alert";n="itemize_remove_alert_text";o="#BD5B5B";a="#DEADAD";s=t.parentElement.itemizeOptions.removeAlertText}else if(e==="added"){i="itemize_add_alert";n="itemize_add_alert_text";o="#00AF66";a="#80D7B3";s=t.parentElement.itemizeOptions.addAlertText}this.alertNb++;var u=document.createElement("div");u.alertId=this.alertNb;var v=document.createElement("div");var h=document.createElement("div");u.classList.add(i);u.classList.add("itemize_alert");h.classList.add(n);h.textContent=s;Object.assign(h.style,{boxSizing:"border-box",width:"100%",height:"100%",textAlign:"center",whiteSpace:"nowrap",padding:"10px 15px 10px 15px"});Object.assign(v.style,{background:a,width:"100%",height:"5px"});Object.assign(u.style,{boxSizing:"border-box",position:"fixed",display:"flex",flexDirection:"column",justifyContent:"center",top:m,left:l,border:"solid 1px "+a,borderRadius:"4px",transform:"translate(".concat(c,", ").concat(f).concat(this.alertNb*100-(d?100:0),"%)"),fontFamily:"helvetica",background:o,color:"#FFFFFF",zIndex:1e5});document.querySelector("body").appendChild(u);u.appendChild(v);u.appendChild(h);if(v.animate){v.animate([{width:"100%"},{width:"0%"}],{duration:p,easing:"linear",fill:"both"})}else{this.animateRAF(v,[{width:{value:100,unit:"%"}}],[{width:{value:0,unit:"%"}}],p)}setTimeout(function(){var e=document.querySelectorAll(".itemize_alert");for(var t=0;t<e.length;t++){if(e[t].alertId>0){var i=parseInt("".concat(f).concat(e[t].alertId*100-(d?100:0)));var n=parseInt("".concat(f).concat(e[t].alertId*100-(d?100:0)-100));if(e[t].animate){e[t].animate([{transform:"translate(".concat(c,", ").concat(i,"%)")},{transform:"translate(".concat(c,", ").concat(n,"%)")}],{duration:150,easing:"ease-in-out",fill:"both"})}else{r.animateRAF(e[t],[{transform:{translateX:parseInt(c),translateY:i,unit:"%"}}],[{transform:{translateX:parseInt(c),translateY:n,unit:"%"}}],150)}e[t].alertId--}}r.alertNb--;setTimeout(function(){document.querySelector("body").removeChild(u)},300)},p)}}},{key:"remove",value:function u(e){var i=this;try{var n=null;if(typeof e==="string"){for(var t=0;t<this.items.length;t++){if(this.items[t].itemizeItemId===e){n=this.items[t];n.arrayPosition=t}}if(!n){n=document.querySelector(e);if(!n||!n.itemizeItemId){throw new Error(" - Itemize error - \nNot a valid Itemize element")}for(var r=0;r<this.items.length;r++){if(this.items[r].itemizeItemId===n.itemizeItemId){n.arrayPosition=r}}}if(!n){throw new Error(" - Itemize error - \nNo item found to remove")}}else{n=e;if(!n){throw new Error(" - Itemize error - \nNo item found to remove")}if(!n.itemizeItemId){throw new Error(" - Itemize error - \nNot a valid Itemize element")}for(var o=0;o<this.items.length;o++){if(n.itemizeItemId===this.items[o].itemizeItemId){n.arrayPosition=o}}}if((n.arrayPosition||n.arrayPosition===0)&&n.parentElement&&n.parentElement.itemizeOptions){if(!n.removeStatus||n.removeStatus!=="pending"){if(this.globalOptions.beforeRemove){n.removeStatus="pending";var a=this.globalOptions.beforeRemove(n);if(a===undefined){throw new Error(' - Itemize error - \n The function "beforeErase" must return a Boolean or a Promise')}if(typeof a.then==="function"){var s=n.parentElement.itemizeOptions.flipAnimDuration;var l=n.onclick;n.onclick=null;a.then(function(e){if(n.parentElement.itemizeOptions.flipAnimation){var t=n.querySelector(".itemize_remove_btn");if(t){t.onclick=null}else{t=n.querySelector("."+i.globalOptions.removeBtnClass);if(t){t.onclick=null}}i.showAlert("removed",n);i.flipRead(i.items);i.flipRemove(n);i.cleanItem(n);i.items.splice(n.arrayPosition,1)}else{i.showAlert("removed",n);n.removeStatus=null;n.remove();i.cleanItem(n);i.items.splice(n.arrayPosition,1)}})["catch"](function(e){console.log(e);n.onclick=l;n.removeStatus=null})}else if(a){if(n.parentElement.itemizeOptions.flipAnimation){var m=n.parentElement.itemizeOptions.flipAnimDuration;var c=n.querySelector(".itemize_remove_btn");n.onclick=null;if(c){c.onclick=null}else{c=n.querySelector("."+this.globalOptions.removeBtnClass);if(c){c.onclick=null}}this.showAlert("removed",n);this.flipRead(this.items);this.flipRemove(n);this.cleanItem(n);this.items.splice(n.arrayPosition,1)}else{this.showAlert("removed",n);n.removeStatus=null;n.remove();this.items.splice(n.arrayPosition,1);this.cleanItem(n)}}}else{if(n.parentElement.itemizeOptions.flipAnimation){var f=n.parentElement.itemizeOptions.flipAnimDuration;var d=n.querySelector(".itemize_remove_btn");if(d){d.onclick=null}else{d=n.querySelector("."+this.globalOptions.removeBtnClass);if(d){d.onclick=null}}this.showAlert("removed",n);this.flipRead(this.items);this.flipRemove(n);this.cleanItem(n);this.items.splice(n.arrayPosition,1)}else{this.showAlert("removed",n);n.removeStatus=null;n.remove();this.cleanItem(n);this.items.splice(n.arrayPosition,1)}}}}else{throw new Error(" - Itemize error - \n this element has an invalid itemizeItemId")}}catch(p){console.error(" - Itemize error - \n"+p)}}},{key:"cleanItem",value:function v(e){for(var t=0;t<e.classList.length;t++){e.classList.remove("itmz_item");if(e.classList[t].indexOf("itemize_item_")!==-1){e.classList.remove(e.classList[t]);break}}if(e.parentNode&&e.parentNode.itemizeOptions&&e.parentNode.itemizeOptions.removeBtnClass){var i=e.querySelector("."+e.parentNode.itemizeOptions.removeBtnClass);if(i){i.remove()}}else{var n=e.querySelector(".itemize_remove_btn");if(n){n.remove()}}if(e.itemizeContainerId){this.clearObservers(e.itemizeContainerId);var r=e.querySelectorAll(".itmz_parent");this.cancelItemize(r);for(var o=0;o<r.length;o++){if(r[o].itemizeContainerId){this.clearObservers(r[o].itemizeContainerId)}}if(e.classList.contains("itmz_parent")){this.cancelItemize([e])}}e.itemizeItemId=null}},{key:"animateRAF",value:function h(a,s,l,m){function c(e){var t;if(!a.startAnimTime){a.startAnimTime=e;a.animTicks=0;for(var i=0;i<s.length;i++){for(var n in s[i]){if(s[i].hasOwnProperty(n)){if(n==="transform"){a.style.transform="translateX(".concat(s[i][n].translateX).concat(s[i][n].unit,") translateY(").concat(s[i][n].translateY).concat(s[i][n].unit,")")}else if(n==="opacity"){a.style.opacity=s[i][n]}else{a.style[n]="".concat(s[i][n].value).concat(s[i][n].unit)}}}}}t=e-a.startAnimTime;for(var r=0;r<l.length;r++){for(var o in l[r]){if(l[r].hasOwnProperty(o)){if(o==="transform"){a.style.transform="translateX(".concat(s[r][o].translateX-(s[r][o].translateX-l[r][o].translateX)/(m*60/1e3)*a.animTicks).concat(l[r][o].unit,") translateY(").concat(s[r][o].translateY-(s[r][o].translateY-l[r][o].translateY)/(m*60/1e3)*a.animTicks).concat(l[r][o].unit,")")}else if(o==="opacity"){a.style.opacity=s[r][o]-(s[r][o]-l[r][o])/(m*60/1e3)*a.animTicks}else{a.style[o]="".concat(s[r][o].value-(s[r][o].value-l[r][o].value)/(m*60/1e3)*a.animTicks).concat(l[r][o].unit)}}}}if(t<m-1){a.animTicks++;requestAnimationFrame(c)}else{a.startAnimTime=null;a.animTicks=0}}requestAnimationFrame(c)}},{key:"flipRemove",value:function g(e){var t=this;e.onclick=null;var i=e.parentElement.itemizeOptions;var n=e.getBoundingClientRect();var r=this.elPos[e.itemizeItemId];var o=r.left-n.left;var a=r.top-n.top;if(e.animate){e.animate([{transform:"translate(".concat(o,"px, ").concat(a,"px)"),opacity:1},{transform:"translate(".concat(o+i.animRemoveTranslateX,"px, ").concat(a+i.animRemoveTranslateY,"px)"),opacity:0}],{duration:i.flipAnimDuration*.5,easing:i.flipAnimEasing,fill:"both"})}else{this.animateRAF(e,[{opacity:1},{transform:{translateX:o,translateY:a,unit:"px"}}],[{opacity:0},{transform:{translateX:o+i.animRemoveTranslateX,translateY:a+i.animRemoveTranslateY,unit:"px"}}],i.flipAnimDuration*.5)}setTimeout(function(){e.removeStatus=null;e.remove();t.flipPlay(t.items,i.flipAnimDuration*.5)},i.flipAnimDuration*.5)}},{key:"flipAdd",value:function b(e){e.classList.remove("itemize_hide");e.inAddAnim=true;this.elPos[e.itemizeItemId]=e.oldAddPos||e.getBoundingClientRect();var t=e.parentElement.itemizeOptions;var i=e.getBoundingClientRect();var n=e.oldAddPos||this.elPos[e.itemizeItemId];var r=n.left-i.left;var o=n.top-i.top;var a=n.width/i.width;var s=n.height/i.height;if(isNaN(a)||a===Infinity){a=1}if(isNaN(s)||s===Infinity){s=1}e.newAddPos=i;e.oldAddPos=n;var l=r+t.animAddTranslateX;var m=o+t.animAddTranslateY;if(e.animate){e.animate([{transform:"translate(".concat(l,"px, ").concat(m,"px)"),opacity:0},{transform:"none",opacity:1}],{duration:t.flipAnimDuration,easing:t.flipAnimEasing,fill:"both"})}else{this.animateRAF(e,[{opacity:0},{transform:{translateX:l,translateY:m,unit:"px"}}],[{opacity:1},{transform:{translateX:0,translateY:0,unit:"px"}}],t.flipAnimDuration)}setTimeout(function(){e.inAddAnim=false;e.newAddPos=null;e.oldPos=null},t.flipAnimDuration)}},{key:"flipRead",value:function z(e){for(var t=0;t<e.length;t++){this.elPos[e[t].itemizeItemId]=e[t].getBoundingClientRect()}}},{key:"flipPlay",value:function y(e,t){for(var i=0;i<e.length;i++){if(!e[i].inAddAnim&&e[i].parentNode&&e[i].parentNode.itemizeOptions){var n=e[i].getBoundingClientRect();var r=this.elPos[e[i].itemizeItemId];var o=r.left-n.left;var a=r.top-n.top;var s=r.width/n.width;var l=r.height/n.height;if(isNaN(s)||s===Infinity){s=1}if(isNaN(l)||l===Infinity){l=1}if(o!==0||a!==0||s!==1||l!==1){if(e[i].animate){e[i].animate([{transform:"translate(".concat(o,"px, ").concat(a,"px)")},{transform:"none"}],{duration:t,easing:e[i].parentNode.itemizeOptions.flipAnimEasing,fill:"both"})}else{this.animateRAF(e[i],[{transform:{translateX:o,translateY:a,unit:"px"}}],[{transform:{translateX:0,translateY:0,unit:"px"}}],t)}}}}}},{key:"mergeOptions",value:function I(e){try{var t={removeBtn:true,removeBtnWidth:20,removeBtnThickness:2,removeBtnColor:"#565C67",removeBtnHoverColor:"#ffffff",removeBtnSharpness:"0px",removeBtnPosition:"top-right",removeBtnMargin:2,removeBtnCircle:true,removeBtnBgColor:"#d1cfcf",removeBtnBgHoverColor:"#959595",removeBtnClass:null,modalConfirm:false,modalText:"Are you sure to remove this item?",removeAlertText:"Item removed",addAlertText:"Item added",showRemoveAlerts:false,showAddAlerts:false,alertPosition:"bottom-right",alertTimer:4e3,flipAnimation:true,flipAnimEasing:"ease-in-out",flipAnimDuration:500,animRemoveTranslateX:0,animRemoveTranslateY:-100,animAddTranslateX:0,animAddTranslateY:-100,beforeRemove:null,outlineItemOnHover:false,nestingLevel:1};for(var i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}return t}catch(n){console.error(n)}}},{key:"optionsTypeCheck",value:function A(e){var t="";if(typeof e.removeBtn!=="boolean"){t+="option 'button' must be a Boolean\n"}if(typeof e.modalConfirm!=="boolean"){t+="option 'modalConfirm' must be a Boolean\n"}if(typeof e.removeBtnWidth!=="number"){t+="option 'removeBtnWidth' must be a Number\n"}if(typeof e.removeBtnThickness!=="number"){t+="option 'removeBtnThickness' must be a Number\n"}if(typeof e.alertTimer!=="number"){t+="option 'alertTimer' must be a Number\n"}if(e.removeBtnClass&&typeof e.removeBtnClass!=="string"){t+="option 'buttonClass' must be a String\n"}if(typeof e.removeBtnHoverColor!=="string"){t+="option 'removeBtnHoverColor' must be a String\n"}if(typeof e.removeBtnSharpness!=="string"){t+="option 'removeBtnSharpness' must be a String\n"}if(typeof e.removeBtnPosition!=="string"){t+="option 'removeBtnPosition' must be a String\n"}if(typeof e.removeBtnBgColor!=="string"){t+="option 'removeBtnBgColor' must be a String\n"}if(typeof e.removeBtnBgHoverColor!=="string"){t+="option 'removeBtnBgHoverColor' must be a String\n"}if(typeof e.removeBtnCircle!=="boolean"){t+="option 'removeBtnCircle' must be a Boolean\n"}if(typeof e.removeBtnMargin!=="number"){t+="option 'removeBtnMargin' must be a Number\n"}if(typeof e.modalText!=="string"){t+="option 'modalText' must be a String\n"}if(typeof e.removeAlertText!=="string"){t+="option 'removeAlertText' must be a String\n"}if(typeof e.addAlertText!=="string"){t+="option 'addAlertText' must be a String\n"}if(typeof e.showRemoveAlerts!=="boolean"){t+="option 'showRemoveAlerts' must be a Boolean\n"}if(typeof e.showAddAlerts!=="boolean"){t+="option 'showAddAlerts' must be a Boolean\n"}if(typeof e.alertPosition!=="string"){t+="option 'alertPosition' must be a String\n"}if(typeof e.flipAnimation!=="boolean"){t+="option 'flipAnimation' must be a Boolean\n"}if(typeof e.outlineItemOnHover!=="boolean"){t+="option 'outlineItemOnHover' must be a Boolean\n"}if(typeof e.nestingLevel!=="number"){t+="option 'nestingLevel' must be a Number\n"}if(typeof e.flipAnimDuration!=="number"){t+="option 'flipAnimDuration' must be a Number\n"}if(typeof e.flipAnimEasing!=="string"){t+="option 'flipAnimEasing' must be a String\n"}else if(e.flipAnimEasing!=="linear"&&e.flipAnimEasing!=="ease"&&e.flipAnimEasing!=="ease-in-out"&&e.flipAnimEasing!=="ease-in"&&e.flipAnimEasing!=="ease-out"&&e.flipAnimEasing.indexOf("cubic-bezier(")===-1){t+="option 'flipAnimEasing' only accepts the pre-defined values 'linear', 'ease', 'ease-in', 'ease-out', and 'ease-in-out', or a custom 'cubic-bezier' value like 'cubic-bezier(0.42, 0, 0.58, 1)'. \n"}if(typeof e.animRemoveTranslateX!=="number"){t+="option 'animRemoveTranslateX' must be a Number\n"}if(typeof e.animRemoveTranslateY!=="number"){t+="option 'animRemoveTranslateY' must be a Number\n"}if(typeof e.animAddTranslateY!=="number"){t+="option 'animAddTranslateY' must be a Number\n"}if(typeof e.animAddTranslateX!=="number"){t+="option 'animAddTranslateX' must be a Number\n"}if(e.beforeRemove&&typeof e.beforeRemove!=="function"){t+="option 'beforeRemove' must be a Function\n"}if(t===""){return"valid"}else{return t}}},{key:"getOptionsFromAttributes",value:function C(e,t){var i=["removeBtnWidth","removeBtnThickness","removeBtnMargin","nestingLevel","flipAnimDuration","animRemoveTranslateX","animRemoveTranslateY","animAddTranslateX","animAddTranslateY","removeBtnThickness","alertTimer"];for(var n in t){if(t.hasOwnProperty(n)){if(e.getAttribute(n)){if(e.getAttribute(n)==="false"){t[n]=false}else if(e.getAttribute(n)==="true"){t[n]=true}else if(i.indexOf(n)!==-1){if(parseInt(e.getAttribute(n))>0){t[n]=parseInt(e.getAttribute(n))}}else{t[n]=e.getAttribute(n)}}}}return t}},{key:"makeId",value:function x(e){var t="";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var n=i.length;for(var r=0;r<e;r++){t+=i.charAt(Math.floor(Math.random()*n))}return t}}]);return i}();try{module.exports=Itemize}catch(_unused){}