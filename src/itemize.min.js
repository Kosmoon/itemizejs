function _instanceof(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](e)}else{return e instanceof t}}function _defineProperty(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function _classCallCheck(e,t){if(!_instanceof(e,t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){if(t)_defineProperties(e.prototype,t);if(i)_defineProperties(e,i);return e}var Itemize=function(){function i(e){_classCallCheck(this,i);this.items=[];this.globalOptions=this.mergeOptions(e);this.alertNb=0;var t=this.optionsTypeCheck(this.globalOptions);if(t!=="valid"){console.error("- Itemize - TYPE ERROR:\n"+t)}else{this.targetElements=this.getTargetElements();if(this.targetElements&&this.targetElements.length>0){this.itemizeIt()}else{console.error("- Itemize - ERROR:\n Cannot find any DOM elements with the attribute 'itemize' \n")}}this.elPos={}}_createClass(i,[{key:"getTargetElements",value:function e(){try{return document.querySelectorAll("[itemize]")}catch(e){console.error(e);return null}}},{key:"getOptionsFromAttributes",value:function t(e,t){if(e.getAttribute("removeBtn")==="false"){t.removeBtn=false}else if(e.getAttribute("removeBtn")==="true"){t.removeBtn=true}if(e.getAttribute("modalConfirm")==="false"){t.modalConfirm=false}else if(e.getAttribute("modalConfirm")==="true"){t.modalConfirm=true}if(e.getAttribute("flipAnimation")==="false"){t.flipAnimation=false}else if(e.getAttribute("flipAnimation")==="true"){t.flipAnimation=true}if(typeof e.getAttribute("removeBtnWidth")==="string"&&parseInt(e.getAttribute("removeBtnWidth"))>0){t.removeBtnWidth=parseInt(e.getAttribute("removeBtnWidth"))}if(typeof e.getAttribute("removeBtnColor")==="string"){t.removeBtnColor=e.getAttribute("removeBtnColor")}if(typeof e.getAttribute("removeBtnHoverColor")==="string"){t.removeBtnHoverColor=e.getAttribute("removeBtnHoverColor")}if(typeof e.getAttribute("removeBtnSharpness")==="string"){t.removeBtnSharpness=e.getAttribute("removeBtnSharpness")}if(typeof e.getAttribute("modalText")==="string"){t.modalText=e.getAttribute("modalText")}if(typeof e.getAttribute("removeAlertText")==="string"){t.removeAlertText=e.getAttribute("removeAlertText")}if(typeof e.getAttribute("addAlertText")==="string"){t.removeAlertText=e.getAttribute("addAlertText")}if(typeof e.getAttribute("alertPosition")==="string"){t.alertPosition=e.getAttribute("alertPosition")}if(typeof e.getAttribute("flipAnimDuration")==="string"&&parseInt(e.getAttribute("flipAnimDuration"))>0){t.flipAnimDuration=parseInt(e.getAttribute("flipAnimDuration"))}if(typeof e.getAttribute("removeBtnThickness")==="string"&&parseInt(e.getAttribute("removeBtnThickness"))>0){t.removeBtnThickness=parseInt(e.getAttribute("removeBtnThickness"))}return t}},{key:"itemizeIt",value:function o(e){var o=this;var t="";try{for(var i=0;i<this.targetElements.length;i++){var r=this.targetElements[i];var n=this.makeId(8);r.itemizeId=n;for(var a=r.classList.length-1;a>=0;a--){if(r.classList[a].indexOf("itemize_parent")!==-1){r.classList.remove(r.classList[a])}}r.classList.add("itemize_parent_".concat(n));var s=Object.assign({},this.globalOptions);s=this.getOptionsFromAttributes(r,s);r.itemizeOptions=s;if(!e){(function(){var e={attributes:true,childList:true,subtree:true};var m=o;var t=function t(e,t){var i=true;var o=false;var r=undefined;try{for(var n=e[Symbol.iterator](),a;!(i=(a=n.next()).done);i=true){var s=a.value;if(s.type=="childList"){s.addedNodes.forEach(function(e){var t=true;e.classList.forEach(function(e){if(e.indexOf("itemize_")!==-1){t=false}});if(t){if(e.getAttribute("notItemize")){console.log("nouvel element not itemize added")}else{m.itemizeChild(e,e.parentNode,true)}}})}}}catch(l){o=true;r=l}finally{try{if(!i&&n["return"]!=null){n["return"]()}}finally{if(o){throw r}}}};var i=new MutationObserver(t);i.observe(r,e)})()}var l=document.querySelector(this.target+" .itemize_style");if(l){r.querySelector(".itemize_style").remove()}var m=document.createElement("style");m.classList.add("itemize_style");m.type="text/css";var d="";if(r.itemizeOptions.removeBtn&&!r.itemizeOptions.removeBtnClass){d+=".itemize_parent_".concat(r.itemizeId," .itemize_btn_remove{position:absolute;top:0!important;right:0!important;width:").concat(r.itemizeOptions.removeBtnWidth,"px!important;height:").concat(r.itemizeOptions.removeBtnWidth,"px!important;overflow:hidden;cursor:pointer;margin-top:5px;margin-right:5px}.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove:hover::after,.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove:hover::before{background:").concat(r.itemizeOptions.removeBtnHoverColor,"}.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove::after,.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove::before{content:'';position:absolute;height:").concat(r.itemizeOptions.removeBtnThickness,"px;width:").concat(r.itemizeOptions.removeBtnWidth,"px;top:50%;left:0;margin-top:").concat(r.itemizeOptions.removeBtnThickness*.5<1?-1:-r.itemizeOptions.removeBtnThickness*.5,"px;background:").concat(r.itemizeOptions.removeBtnColor,";border-radius:").concat(r.itemizeOptions.removeBtnSharpness,"}.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.itemize_parent_").concat(r.itemizeId," .itemize_btn_remove::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}")}if(m.styleSheet){m.styleSheet.cssText=d}else{m.appendChild(document.createTextNode(d))}r.appendChild(m);for(var f=0;f<r.children.length;f++){var c=r.children[f];this.itemizeChild(c,r)}}}catch(p){console.error("- Itemize - ERROR:\n"+t);console.error(p)}}},{key:"itemizeChild",value:function r(e,t,i){var o=this;if(e.type!=="text/css"&&typeof e.getAttribute("notItemize")!=="string"){if(!e.itemizeId){e.itemizeId=this.makeId(8)}this.items.push(e);e.classList.add("itemize_item_"+e.itemizeId);if(!t.itemizeOptions.removeBtn){e.onclick=function(){if(t.itemizeOptions.modalConfirm){o.modalConfirm(e.itemizeId)}else{o.remove(e.itemizeId)}}}else{if(!t.itemizeOptions.removeBtnClass){e.style.position="relative";var r=document.createElement("div");r.classList.add("itemize_btn_"+e.itemizeId);r.classList.add("itemize_btn_remove");r.onclick=function(){if(t.itemizeOptions.modalConfirm){console.log(e.itemizeId);o.modalConfirm(e.itemizeId)}else{o.remove(e.itemizeId)}};e.appendChild(r)}else{var n=document.querySelector(".itemize_item_"+e.itemizeId+" ."+t.itemizeOptions.removeBtnClass);if(!n){knownErrors+="Cannot find specified class: "+t.itemizeOptions.removeBtnClass+"\n"}n.onclick=function(){if(t.itemizeOptions.modalConfirm){o.modalConfirm(e.itemizeId)}else{o.remove(e.itemizeId)}}}}if(i){this.showAlert("added",e)}}}},{key:"modalConfirm",value:function n(e){var t=this;try{var i;var o=null;if(typeof e==="string"){for(var r=0;r<this.items.length;r++){if(this.items[r].itemizeId===e){o=this.items[r]}}if(!o){o=document.querySelector(e);if(!o||!o.itemizeId){throw new Error("Not a valid Itemize element1, cannot create a confirm modal.")}}if(!o){throw new Error("No item found2, cannot create a confirm modal.")}}else{o=elem;if(!o){throw new Error("No item found3, cannot create a confirm modal.")}if(!o.itemizeId){throw new Error("Not a valid Itemize element4, cannot create a confirm modal.")}}var n=document.createElement("div");var a=document.createElement("div");var s=document.createElement("div");var l=document.createElement("div");var m=document.createElement("button");var d=document.createElement("button");var f=document.querySelector("body");var c=f.style.overflow;f.style.overflow="hidden";n.classList.add("itemize_modal_backdrop");a.classList.add("itemize_modal");s.classList.add("itemize_modal_text");m.classList.add("itemize_modal_btnConfirm");d.classList.add("itemize_modal_btnCancel");s.textContent=o.parentNode.itemizeOptions.modalText;m.innerHTML="Yes";d.innerHTML="Cancel";l.appendChild(d);l.appendChild(m);a.appendChild(s);a.appendChild(l);var p=function p(e,t,i){t.animate([{opacity:1},{opacity:0}],{duration:300,easing:"ease-in-out",fill:"both"});i.animate([{opacity:1,transform:"translateY(-50%) translateX(-50%)"},{opacity:0,transform:"translateY(0%) translateX(-50%)"}],{duration:300,easing:"cubic-bezier(.75,-0.5,0,1.75)",fill:"both"});setTimeout(function(){e.removeChild(t);e.removeChild(i);e.style.overflow=c},300)};n.onclick=function(){p(f,n,a)};d.onclick=function(){p(f,n,a)};m.onclick=function(){p(f,n,a);t.remove(e)};Object.assign(a.style,(i={display:"block",position:"fixed ",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px",background:"#FFFFFF",width:"90vw",maxWidth:"500px",borderRadius:"4px",boxSizing:"border-box"},_defineProperty(i,"display","flex"),_defineProperty(i,"flexDirection","column"),_defineProperty(i,"justifyContent","center"),_defineProperty(i,"textAlign","center"),_defineProperty(i,"fontFamily","helvetica"),_defineProperty(i,"zIndex",1e6),i));Object.assign(s.style,{marginBottom:"25px"});Object.assign(l.style,{width:"100%",display:"flex"});Object.assign(d.style,{background:"#6C757D",border:"none",padding:"10px 0 10px 0",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF"});Object.assign(m.style,{background:"#F94336",border:"none",padding:"10px 0 10px 0",borderTopRightRadius:"4px",borderBottomRightRadius:"4px",flex:"1 0 auto",cursor:"pointer",color:"#FFFFFF"});Object.assign(n.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0,0.5)",zIndex:1e5});f.prepend(a);f.prepend(n);n.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-in-out",fill:"both"});a.animate([{opacity:0,transform:"translateY(-100%) translateX(-50%)"},{opacity:1,transform:"translateY(-50%) translateX(-50%)"}],{duration:400,easing:"cubic-bezier(.75,-0.5,0,1.75)",fill:"both"})}catch(u){console.error("- Itemize - ERROR:\n"+u)}}},{key:"showAlert",value:function a(e,t){var i=this;if(t.parentNode.itemizeOptions.showAlert){var o="";var r="";var n="";var a="";var s="";var l="";var m="";var d="";var f="-";var c=false;var p=t.parentNode.itemizeOptions.alertTimer;if(t.parentNode.itemizeOptions.alertPosition==="bottom-center"){l="50%";m="100%";d="-50%"}else if(t.parentNode.itemizeOptions.alertPosition==="bottom-right"){l="100%";m="100%";d="-100%"}else if(t.parentNode.itemizeOptions.alertPosition==="bottom-left"){l="0%";m="100%";d="0%"}else if(t.parentNode.itemizeOptions.alertPosition==="top-center"){l="50%";m="0%";d="-50%";f="";c=true}else if(t.parentNode.itemizeOptions.alertPosition==="top-right"){l="100%";m="0%";d="-100%";f="";c=true}else if(t.parentNode.itemizeOptions.alertPosition==="top-left"){l="0%";m="0%";d="0%";f="";c=true}if(e==="removed"){o="itemize_remove_alert";r="itemize_remove_alert_text";n="#BD5B5B";a="#DEADAD";s=t.parentNode.itemizeOptions.removeAlertText}else if(e==="added"){o="itemize_add_alert";r="itemize_add_alert_text";n="#00AF66";a="#80D7B3";s=t.parentNode.itemizeOptions.addAlertText}this.alertNb++;var u=document.createElement("div");u.alertNb=this.alertNb;var v=document.createElement("div");var h=document.createElement("div");u.classList.add(o);u.classList.add("itemize_alert");h.classList.add(r);h.textContent=s;Object.assign(h.style,{boxSizing:"border-box",width:"100%",height:"100%",textAlign:"center",whiteSpace:"nowrap",padding:"10px 15px 10px 15px"});Object.assign(v.style,{background:a,width:"100%",height:"5px"});Object.assign(u.style,{boxSizing:"border-box",position:"fixed",display:"flex",flexDirection:"column",justifyContent:"center",top:m,left:l,border:"solid 1px "+a,borderRadius:"4px",transform:"translate(".concat(d,", ").concat(f).concat(this.alertNb*100-(c?100:0),"%)"),fontFamily:"helvetica",background:n,color:"#FFFFFF",zIndex:1e5});console.log(c?100:0);document.querySelector("body").appendChild(u);u.appendChild(v);u.appendChild(h);v.animate([{width:"100%"},{width:"0%"}],{duration:p,easing:"linear",fill:"both"});setTimeout(function(){var e=document.querySelectorAll(".itemize_alert");for(var t=0;t<e.length;t++){if(e[t].alertNb>0){e[t].animate([{transform:"translate(".concat(d,", ").concat(f).concat(e[t].alertNb*100-(c?100:0),"%)")},{transform:"translate(".concat(d,", ").concat(f).concat(e[t].alertNb*100-(c?100:0)-100,"%)")}],{duration:300,easing:"ease-in-out",fill:"both"});e[t].alertNb--}}i.alertNb--;setTimeout(function(){document.querySelector("body").removeChild(u)},300)},p)}}},{key:"remove",value:function s(e){var i=this;try{var o=null;if(typeof e==="string"){for(var t=0;t<this.items.length;t++){if(this.items[t].itemizeId===e){o=this.items[t];o.arrayPosition=t}}if(!o){o=document.querySelector(e);if(!o||!o.itemizeId){throw new Error("Not a valid Itemize element")}for(var r=0;r<this.items.length;r++){if(this.items[r].itemizeId===o.itemizeId){o.arrayPosition=r}}}if(!o){throw new Error("No item found to remove")}}else{o=e;if(!o){throw new Error("No item found to remove")}if(!o.itemizeId){throw new Error("Not a valid Itemize element")}for(var n=0;n<this.items.length;n++){if(o.itemizeId===this.items[n].itemizeId){o.arrayPosition=n}}}if(o.arrayPosition||o.arrayPosition===0){if(!o.removeStatus||o.removeStatus!=="pending"){if(this.globalOptions.beforeRemove){o.removeStatus="pending";var a=this.globalOptions.beforeRemove(o);if(typeof a.then==="function"){a.then(function(e){console.log(e);if(o.parentNode.itemizeOptions.flipAnimation){var t=o.querySelector(".itemize_btn_remove");if(t){t.onclick=null}else{t=o.querySelector("."+i.globalOptions.removeBtnClass);if(t){t.onclick=null}}i.showAlert("removed",o);i.flipRead(i.items);i.flipRemove(o);i.items.splice(o.arrayPosition,1);i.flipPlay(i.items)}else{i.showAlert("removed",o);o.removeStatus=null;o.parentNode.removeChild(o);i.items.splice(o.arrayPosition,1)}})["catch"](function(e){console.log(e);o.removeStatus=null})}else if(a){if(o.parentNode.itemizeOptions.flipAnimation){var s=o.querySelector(".itemize_btn_remove");if(s){s.onclick=null}else{s=o.querySelector("."+this.globalOptions.removeBtnClass);if(s){s.onclick=null}}this.showAlert("removed",o);this.flipRead(this.items);this.flipRemove(o);this.items.splice(o.arrayPosition,1);this.flipPlay(this.items)}else{this.showAlert("removed",o);o.removeStatus=null;o.parentNode.removeChild(o);this.items.splice(o.arrayPosition,1)}}}else{if(o.parentNode.itemizeOptions.flipAnimation){var l=o.querySelector(".itemize_btn_remove");if(l){l.onclick=null}else{l=o.querySelector("."+this.globalOptions.removeBtnClass);if(l){l.onclick=null}}this.showAlert("removed",o);this.flipRead(this.items);this.flipRemove(o);this.items.splice(o.arrayPosition,1);this.flipPlay(this.items)}else{this.showAlert("removed",o);o.removeStatus=null;o.parentNode.removeChild(o);this.items.splice(o.arrayPosition,1)}}}}else{throw new Error("this element has an invalid itemizeId")}}catch(m){console.error("- Itemize - ERROR:\n"+m)}}},{key:"flipRemove",value:function l(e){e.parentNode.appendChild(e);var t=e.getBoundingClientRect();var i=this.elPos[e.itemizeId];var o=i.x-t.x;var r=i.y-t.y;e.animate([{transform:"translate(".concat(o,"px, ").concat(r,"px)"),opacity:1},{transform:"translate(".concat(o+50,"px, ").concat(r,"px)"),opacity:0}],{duration:e.parentNode.itemizeOptions.flipAnimDuration,easing:"ease-in-out",fill:"both"});setTimeout(function(){e.removeStatus=null;e.parentNode.removeChild(e)},e.parentNode.itemizeOptions.flipAnimDuration)}},{key:"flipRead",value:function m(e){this.elPos={};for(var t=0;t<e.length;t++){this.elPos[e[t].itemizeId]=e[t].getBoundingClientRect()}}},{key:"flipPlay",value:function d(e){for(var t=0;t<e.length;t++){var i=e[t].getBoundingClientRect();var o=this.elPos[e[t].itemizeId];var r=o.x-i.x;var n=o.y-i.y;var a=o.width/i.width;var s=o.height/i.height;e[t].animate([{transform:"translate(".concat(r,"px, ").concat(n,"px) scale(").concat(a,", ").concat(s,")")},{transform:"none"}],{duration:e[t].parentNode.itemizeOptions.flipAnimDuration,easing:"ease-in-out",fill:"both"})}}},{key:"mergeOptions",value:function f(e){try{var t={removeBtn:true,removeBtnWidth:20,removeBtnThickness:2,removeBtnColor:"#525252",removeBtnHoverColor:"#000000",removeBtnSharpness:"100%",removeBtnClass:null,showAlert:true,modalConfirm:false,modalText:"Are you sure to remove this item?",removeAlertText:"Item removed",addAlertText:"Item added",alertPosition:"bottom-center",alertTimer:4e3,flipAnimation:true,flipAnimDuration:500,beforeRemove:null};for(var i in e){if(e.hasOwnProperty(i))t[i]=e[i]}return t}catch(o){console.error(o)}}},{key:"optionsTypeCheck",value:function c(e){var t="";if(typeof e.removeBtn!=="boolean"){t+="option 'button' must be a Boolean\n"}if(typeof e.modalConfirm!=="boolean"){t+="option 'modalConfirm' must be a Boolean\n"}if(typeof e.showAlert!=="boolean"){t+="option 'showAlert' must be a Boolean\n"}if(typeof e.removeBtnWidth!=="number"){t+="option 'removeBtnWidth' must be a Number\n"}if(typeof e.removeBtnThickness!=="number"){t+="option 'removeBtnThickness' must be a Number\n"}if(typeof e.alertTimer!=="number"){t+="option 'alertTimer' must be a Number\n"}if(e.removeBtnClass&&typeof e.removeBtnClass!=="string"){t+="option 'buttonClass' must be a String\n"}if(typeof e.removeBtnHoverColor!=="string"){t+="option 'removeBtnHoverColor' must be a String\n"}if(typeof e.removeBtnSharpness!=="string"){t+="option 'removeBtnSharpness' must be a String\n"}if(typeof e.modalText!=="string"){t+="option 'modalText' must be a String\n"}if(typeof e.removeAlertText!=="string"){t+="option 'removeAlertText' must be a String\n"}if(typeof e.addAlertText!=="string"){t+="option 'addAlertText' must be a String\n"}if(typeof e.alertPosition!=="string"){t+="option 'alertPosition' must be a String\n"}if(typeof e.flipAnimation!=="boolean"){t+="option 'flipAnimation' must be a Boolean\n"}if(typeof e.flipAnimDuration!=="number"){t+="option 'flipAnimDuration' must be a Number\n"}if(e.beforeRemove&&typeof e.beforeRemove!=="function"){t+="option 'beforeRemove' must be a Function\n"}if(t===""){return"valid"}else{return t}}},{key:"makeId",value:function p(e){var t="";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var o=i.length;for(var r=0;r<e;r++){t+=i.charAt(Math.floor(Math.random()*o))}return t}}]);return i}();